$.fn.extend({jScrollie:function(){this.each(function(r){var e=$(this);var o=e.data("jScrollie");if(o==null){var m=14;e.wrap('<div class="jScrollieMetaContainer">');e.before('<div class="jScrollieContainer" style="width:'+m+'px"><div class="jScrollieTrack"><div class="jScrollieDrag"><div class="jScrollieDragTop"></div><div class="jScrollieDragBottom"></div></div></div></div>');e.append('<div class="jScrollieClear" style="clear:both;"></div>');e.wrap('<div class="jScrollie">');var j=e.parent();o=j.prev();var p=$("> :first",e);p.css("overflow","hidden");e.data("jScrollie",o);e.data("track",$(".jScrollieTrack",o));e.data("drag",$(".jScrollieDrag",o));e.data("dragTop",$(".jScrollieDragTop",o));e.data("dragBottom",$(".jScrollieDragBottom",o));e.data("content",p);e.data("clearer",$("> :last",e));e.data("scroller",j);o.hide();var h=function(u){var v=t.offset();var i=e.data("offset");if((e.height()!=e.data("height"))||(b.position().top-p.position().top!=e.data("contentHeight"))||(v.top!=i.top)||(v.left!=i.left)){e.jScrollie()}};window.setInterval(function(){h()},400)}var m=e.data("barWidth");var n=e.data("track");var s=e.data("drag");var a=e.data("dragTop");var f=e.data("dragBottom");var p=e.data("content");var b=e.data("clearer");var t=e.data("scroller");var q=b.position().top-p.position().top;e.data("height",t.height());e.data("contentHeight",q);e.data("offset",t.offset());e.unbind();var g=t.height()/q;if(g<1){o.show();p.addClass("jScrollieVisible");o.height(t.height()-10);var c=t.offset();o.css("right","2px").css("top","10px");var l=Math.max(Math.round(t.height()*g),a.height()+f.height());s.height(l-20);var d=function(){s.css("top",Math.min(Math.round(t.scrollTop()*g),t.height()-l)+"px")};d();t.scroll(function(i){d()});var k=function(){$("html").unbind("mousemove.jScrollie")};s.mousedown(function(u){k();var i=u.pageY-s.offset().top;$("html").bind("mousemove.jScrollie",function(v){t.scrollTop((v.pageY-t.offset().top-i)/g);return false}).mouseup(k);return false});n.mousedown(function(i){t.scrollTop(((i.pageY-20)/t.height())*q)})}else{e.unbind();o.hide();p.removeClass("jScrollieVisible");p.width(e.width()-p.innerWidth()+p.width())}})}});